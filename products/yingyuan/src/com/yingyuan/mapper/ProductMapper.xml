<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yingyuan.dao.ProductDao" >
	<select id="selectMovie"  resultType="Product">
		select * from product
		<where>
			<if test="isable!=null and isable!=''">
				and isable=#{isable}
			</if>
			<if test="status!=null and status!=''">
				and status=#{status}
			</if>
			<if test="buxiaxianstatus!=null and buxiaxianstatus!=''">
				and (status=0 or status=1)
			</if>
			<if test="type!=null and type!=''">
				and type like CONCAT('%',#{type},'%')
			</if>
			<if test="id!=null">
				and id=#{id}
			</if>
			<if test="name!=null and name!=''">
				and name like CONCAT('%',#{name},'%')
			</if>
			<if test="gmttime1!=null and gmttime2!=null">
				and gmttime between #{gmttime1} and #{gmttime2}
			</if>
		</where>
		order by gmttime desc
		 <choose>
            <when test="pageSize!=null">
                limit ${pageNum},${pageSize}
            </when>
            <otherwise>
            </otherwise>
        </choose>
	</select>
	<select id="selectMovietotal"  resultType="java.lang.Integer">
		select count(*) from product
		<where>
			<if test="isable!=null and isable!=''">
				and isable=#{isable}
			</if>
			<if test="status!=null and status!=''">
				and status=#{status}
			</if>
			<if test="type!=null and type!=''">
				and type like CONCAT('%',#{type},'%')
			</if>
			<if test="id!=null">
				and id=#{id}
			</if>
			<if test="name!=null and name!=''">
				and name like CONCAT('%',#{name},'%')
			</if>
			<if test="gmttime1!=null and gmttime2!=null">
				and gmttime between #{gmttime1} and #{gmttime2}
			</if>
		</where>
	
	</select>
	
	
	<insert id="insertmovie" parameterType="Product">
	INSERT INTO product(name, mainactor, director, video, status, type, duration, speak, description, isable, image, gmttime, upttime) 
	VALUES(#{name},#{mainactor},#{director},#{video},#{status},#{type},#{duration},#{speak},#{description},#{isable},#{image},#{gmttime},#{upttime})
	
	</insert>
	<update id="updatemovie" parameterType="Product">
		update product set name=#{name},mainactor=#{mainactor},director=#{director},video=#{video},status=#{status},type=#{type},duration=#{duration},speak=#{speak},
		description=#{description},isable=#{isable},image=#{image},gmttime=#{gmttime},upttime=#{upttime}
		where id=#{id}
	
	</update>
	
</mapper>